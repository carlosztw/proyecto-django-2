{% extends 'app/base.html' %}
{% block titulo %} Administrar Productos {% endblock %}
{% load static %}
{% block css %} <link rel="stylesheet" href="{% static 'app/css/productos.css' %}"> {% endblock %}
{% block js %}<script src="{% static 'app/js/productos.js' %}"></script>{% endblock %}
{% block contenido %}
<div>   
    <br>
    <h1 style="text-align: center; color:#0D6EFD; "> Administraci√≥n de Productos </h1>  
</div>
<!-- AGREGAR -->
<div class="col-md-12 text-center">
    <button type="button" class="btn btn-primary" style=" margin-top: 2%; margin-bottom: 2%;" id="esconder"> Agregar Producto </button>
</div>
<div class="container" id="third" style="display: none;">   
    <div class="row justify-content-center">
        <div class="col-12 col-sm-10 col-md-7 col-lg-7 col-xl-5">
            <form action="" method="POST" enctype="multipart/form-data" class="needs-validation" id="p_form" novalidate>
                {% csrf_token %}
                <div class="mb-3 row">
                        <label for="staticEmail" class="col-sm-2 col-form-label">Nombre:</label>
                    <div class="col-sm-10">
                        <input class="form-control" type="text" placeholder="Nombre del producto" aria-label="default input example" name="p_nombre" id="p_nombre" required>
                    </div>
                </div>
                <div class="mb-3 row">
                        <label for="staticEmail" class="col-sm-2 col-form-label">Precio:</label>
                    <div class="col-sm-10">
                        <input class="form-control" type="number" placeholder="Precio del producto" aria-label="default input example" min="0" oninput="validity.valid||(value='');" name="p_precio" id="p_precio" required>
                    </div>
                </div>
                <div class="mb-3 row">
                        <label for="staticEmail" class="col-sm-2 col-form-label">Imagen:</label>
                    <div class="col-sm-10">
                        <input class="form-control" type="file" aria-label="default input example" name="p_imagen" id="p_imagen">
                    </div>
                </div>
                <div class="mb-3 row">
                        <label for="staticEmail" class="col-sm-2 col-form-label">Stock:</label>
                    <div class="col-sm-10">
                        <input class="form-control" type="number" placeholder="Stock del producto" aria-label="default input example" min="0" oninput="validity.valid||(value='');" name="p_stock" id="p_stock" required>
                    </div>
                </div>
                <select class="form-select" aria-label="Default select example" name="p_tp" id="p_tp" required>
                    <option selected disabled value="">Seleccionar tipo de producto</option>
                    {% for i in categorias %}
                    <option value="{{i.0}}">{{i.1}}</option>
                    {% endfor %}
                </select>
                <br>
                <div class="col-12 text-center">
                    <button class="btn btn-success" type="submit">Guardar</button>
                    <button class="btn btn-secondary" type="reset">Limpiar</button>
                </div>
            </form>
        </div>
    </div>
    <br>
</div>
<!-- LISTAR -->
<div class="container-fluid cardprod">
    <div class="row">
        <!-- CARD DE PRODUCTOS -->
        <div class="gallery">
            {% for p in productos %}
            <div class="content">
                {% if p.imagen %}
                <img src="data:imagen/png;base64, {{p.imagen}}"> 
                {% else %}
                <img src="{% static 'app/img/noimagen.jpg' %}">
                {% endif %}
                <h10>Stock: {{p.data.4}} uds.</h10>
                <h3>{{p.data.1}}</h3>
                <h4>${{p.data.2}}</h4>
                <br>
                <div>
                    <a href="{% url 'modificar_producto' p.data.0 %}" class="btn btn-warning">Modificar</a>
                    <a onclick="confirmarEliminar({{p.data.0}})" class="btn btn-danger">Eliminar</a>
                </div>
                <br>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}